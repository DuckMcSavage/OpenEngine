<!DOCTYPE html>

<html lang="en">

	<head>
		<title>Open Engine Scene Example</title>
		
		<style>
			body {
				width: 100%;
				height: 100%;
				display: block;
				overflow: hidden;
				margin: auto;
			}
			#Engine {
				width: 100%;
				height: 100%;
				position: absolute;
				display: block;
				margin: auto;
			}
		</style>
	</head>

	<body>
		<canvas id="Engine"></canvas>
		
		<script type="module">
			import OpenEngine from '../OpenEngine.max.js';
			
			let canvas = document.querySelector("#Engine");
			let engine = new OpenEngine.Engine(canvas);
			
			engine.ambientLevel = 0.1;
			engine.ambientColor = new OpenEngine.Color3(1, 0, 0);
			
			//let sun = new OpenEngine.Light.Directional(engine);
			//engine.Add(sun);
			
			let pointLightRed = new OpenEngine.Light.Point(engine);
			pointLightRed.position = new OpenEngine.Vector3(-10, 2, -10);
			pointLightRed.color = new OpenEngine.Color3(1, 0, 0);
			engine.Add(pointLightRed);
			
			let pointLightGreen = new OpenEngine.Light.Point(engine);
			pointLightGreen.position = new OpenEngine.Vector3(10, 2, 10);
			pointLightGreen.color = new OpenEngine.Color3(0, 1, 0);
			engine.Add(pointLightGreen);
			
			let pointLightBlue = new OpenEngine.Light.Point(engine);
			pointLightBlue.position = new OpenEngine.Vector3(10, 2, -10);
			pointLightBlue.color = new OpenEngine.Color3(0, 0, 1);
			engine.Add(pointLightBlue);
			
			/*
			let Box1 = new OpenEngine.Mesh.Cube(engine);
			Box1.material.texture = new OpenEngine.Texture("test.jpg", engine);
			Box1.position = new OpenEngine.Vector3(0,0,-15);
			engine.Add(Box1);
			*/
			
			let Box1 = new OpenEngine.Mesh.Cube(engine);
			Box1.position.y = 5;
			Box1.scale = new OpenEngine.Vector3(25, 25, 1);
			engine.Add(Box1);
			
			let Box2 = new OpenEngine.Mesh.Cube(engine);
			Box2.scale = new OpenEngine.Vector3(35, 1, 35);
			engine.Add(Box2);

			engine.Camera.position = new OpenEngine.Vector3(-25, -15, -25);
			engine.Camera.rotation = new OpenEngine.Vector3(Math.PI/6, -Math.PI/4, 0);

			let renderLoop = function()  {
				window.requestAnimationFrame(renderLoop);

				Box1.rotation.y += 0.02;

				engine.render();
			};
			
			window.requestAnimationFrame(renderLoop);
			console.log(engine);
		
		</script>
	</body>
	
</html>